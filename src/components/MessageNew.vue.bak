<template>
  <div class="messageNew">
    <div class="message">
      <div class="messageHeader"><a href="#">user</a></div>
      <textarea class="messageContent" v-model="message" placeholder="新增貼文" id="messageNewContent"></textarea>
      <div class="messageFooter"><button class="btn info" @click="postMessage">發佈</button>&nbsp;<button class="btn info">清除</button></div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'MessageNew',
  props: ['shared'],
  data () {
    return {
      message: ''
    }
  },
  methods: {
    postMessage () {
      var postRef = firebase.database().ref('/messages/');
      postRef.push().set({
        by: this.shared.user.uid,
        content:this.message,
        time: firebase.database.ServerValue.TIMESTAMP
      }).then(function(){
        console.log("新增Post成功");
      }).catch(function(err){
        console.error("新增Post錯誤：",err);
      })
/*
      this.messages.push({
        by: sessionStorage.loginUser.uid,
        content: this.message
      }) */
    }
  }
}
</script>

<style>

</style>
